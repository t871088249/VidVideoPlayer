{"version":3,"file":"videoCreator.js","sources":["../src/libs/event.js","../src/libs/videoControl/index.js","../src/libs/tencent/index.js","../src/libs/youku/mob_yk_video.js","../src/libs/youku/pc_yk_video.js","../src/libs/youku/index.js","../src/libs/dialog.js","../src/index.js"],"sourcesContent":["class event {\r\n    constructor() {\r\n        this.eventMap = {};\r\n    }\r\n    on(eventName, handler) {\r\n        if (typeof handler != 'function') {\r\n            return false;\r\n        }\r\n        if (!this.eventMap[eventName]) {\r\n            this.eventMap[eventName] = []\r\n        }\r\n        this.eventMap[eventName].push(handler)\r\n    }\r\n    off(eventName, handler) {\r\n        if (typeof handler == 'function') {\r\n            this.eventMap[eventName] = this.eventMap[eventName].filter(fn=> fn != handler)\r\n        }\r\n    }\r\n    once(eventName, fn) {\r\n        let f = (that, ...args) => {\r\n            fn.apply(that, args);\r\n            this.off(eventName, f)\r\n        }\r\n        this.on(eventName, f)\r\n    }\r\n    emit(eventName, ...args) {\r\n        if (this.eventMap[eventName]) {\r\n            this.eventMap[eventName].forEach(fn => {\r\n                fn.apply(this,args)\r\n            })\r\n        }\r\n    }\r\n}\r\n\r\nexport default event;","import event from '../event';\r\nclass videoControl extends event {\r\n    static videoCollections = [];\r\n    static stopOtherVideo = (vid) => {\r\n        videoControl.videoCollections.forEach(item => {\r\n            if (item.vid != vid) {\r\n                item.pause()\r\n            }\r\n        })\r\n    }\r\n    constructor(vid, playStopOther = true) {\r\n        super()\r\n        this.vid = vid;\r\n        this.on('ready', () => {\r\n            videoControl.videoCollections.push(this);\r\n        })\r\n        this.on('play', () => {\r\n            if (playStopOther) {\r\n                videoControl.stopOtherVideo(this.vid)\r\n            }\r\n        })\r\n    }\r\n    \r\n    pause() {\r\n        \r\n    }\r\n    play() {\r\n        \r\n    }\r\n    \r\n    \r\n}\r\n\r\nexport default videoControl","import videoControl from '../videoControl/index';\r\nimport $ from 'jQuery';\r\nconst blur_str = '-webkit-filter:blur(10px);-moz-filter:blur(10px);-o-filter:blur(10px);-ms-filter:blur(10px);filter:blur(10px);'\r\n\r\n\r\n\r\nclass tx_video_creator extends videoControl {\r\n    constructor(option) {\r\n        super(option.vid, option.playStopOther);\r\n        this.option = option;\r\n        this.v = null;\r\n        // 初始化重置一些样式\r\nvar style = document.createElement('style');\r\n\r\n\r\nconsole.log($)\r\nstyle.innerHTML = [\r\n    // 腾讯视频自定义海报  取消覆盖整个窗口 改为 缩放\r\n    \".txp_poster {background-size: contain !important;}\"\r\n].join('')\r\n\r\n$('head').append(style);\r\n        if (option) {\r\n            this.container = $('#' + option.selector);\r\n            this.option = option;\r\n            this.initUserEvent()\r\n            this.init();\r\n            this.initPlayerEvent();\r\n        }\r\n    }\r\n    initUserEvent() {\r\n        for (var key in this.option.events) {\r\n            if (this.option.events.hasOwnProperty(key)) {\r\n                // events[key] = this.option.events[key]\r\n                this.on(key, this.option.events[key])\r\n            }\r\n        }\r\n    }\r\n    initPlayerEvent() {\r\n        let player = this.v;\r\n        let container = this.container;\r\n        let initVideoPlayIcon = ()=>{\r\n            container.append('<svg class=\"video_icon\" viewBox=\"0 0 100 100\" style=\"position: absolute; z-index: 3; width: 60px; height: 60px; top: 50%; left: 50%; margin-left: -30px; margin-top: -50px\">  <circle cx=\"50\" cy=\"50\" r=\"50\" style=\"fill:#222;fill-opacity:0.75\"></circle>   <path transform=\"translate(36, 33)\" d=\"M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z\" style=\"   fill:#fff;\"></path></svg>');\r\n            container.find('.video_icon').on( 'click', ()=>{\r\n                container.find('.video_icon').hide()\r\n                this.play()\r\n            })\r\n        }\r\n\r\n        let initTimeupdate = (e) => {\r\n            player.on('timeupdate', function (e) {\r\n                var t = e.currentTime;\r\n                if (t === undefined) {\r\n                    t = this.v.getCurrentTime();\r\n                }\r\n                try {\r\n                    this.emit('timeupdate', vid, t)\r\n                } catch (error) { }\r\n            })\r\n        }\r\n\r\n        if (player.getPlayerState) {\r\n            this.emit('ready')\r\n            if (device == \"pc\") {\r\n                initVideoPlayIcon()\r\n            }\r\n            initTimeupdate();\r\n        }\r\n\r\n        this.on('play', () => {\r\n            container.find('.video_icon').hide();\r\n        })\r\n        this.on('pause', () => {\r\n            container.find('.video_icon').show();\r\n        })\r\n        player.on('ready', ()=> {\r\n            this.emit('ready')\r\n            if (device == \"pc\") {\r\n                initVideoPlayIcon()\r\n            }\r\n            var poster = this.v.getPoster();\r\n            container.find('.txp_poster').html('<div style=\"overflow: hidden;\"><img style=\"' + blur_str + 'width: 100%; height: 100%\" src=\"' + poster + '\"></div> <img style=\"position: absolute; top: 0;width: 100%; height: 100%; left: 0;object-fit: contain\" src=\"' + poster + '\">')\r\n        });\r\n        initTimeupdate();\r\n        player.on('volumeChange', (option) => {\r\n            this.emit('volumeChange', option)\r\n        });\r\n        player.on('vidChange', vid => {\r\n            this.emit('vidChange', option)\r\n        });\r\n        player.on('playStateChange', (state) => {\r\n            let s = state;\r\n            if (typeof s != 'number') {\r\n                s = s.state;\r\n            }\r\n            //state的状态：\r\n            // -1（未开始） \r\n            // 0（已结束） end\r\n            // 1（正在播放） play\r\n            // 2（已暂停） pause\r\n            // 3（正在缓冲） loading\r\n            switch (s) {\r\n                case 0:\r\n                    //结束\r\n                    this.emit('end');\r\n                    break;\r\n                case 1:\r\n                    this.emit('play');\r\n                    break;\r\n                case 2:\r\n                    this.emit('pause');\r\n                    break;\r\n                case 3:\r\n                    this.emit('loading');\r\n                    break;\r\n            \r\n                default:\r\n                    break;\r\n            }\r\n            \r\n        });\r\n        player.on('error', function (e) {\r\n            this.emit('error', e);\r\n        })\r\n\r\n    }\r\n    init() {\r\n        let { selector, poster, vid, autoplay } = this.option\r\n        // this.reg(this.option.vid, events);\r\n        this.v = new Txplayer({\r\n            containerId: selector,\r\n            vid: vid,\r\n            width: '100%',\r\n            height: \"100%\",\r\n            poster: poster,\r\n            autoplay: autoplay\r\n        });\r\n    }\r\n    pause() {\r\n        this?.v?.pause();\r\n    }\r\n    play() {\r\n        this?.v?.play();\r\n    }\r\n    getCurrentTime() {\r\n        return this.v.getCurrentTime()\r\n    }\r\n    getTotalTime() {\r\n        return this.v.getDuration()\r\n    }\r\n    seekTo(t) {\r\n        if (!isNaN(t)) {\r\n            this.v.seekTo(t);\r\n            // this.emit('seekTo', t)\r\n        }\r\n    }\r\n}\r\n\r\nexport default tx_video_creator","\r\nimport videoControl from '../videoControl/index';\r\nimport $ from 'jQuery';\r\nconst blur_str = '-webkit-filter:blur(10px);-moz-filter:blur(10px);-o-filter:blur(10px);-ms-filter:blur(10px);filter:blur(10px);'\r\n\r\n\r\nfunction isFullscreen(){\r\n    \r\n    return !!( document.fullscreen ||  document.mozFullScreen ||document.webkitIsFullScreen ||document.webkitFullScreen || document.msFullScreen)\r\n}\r\n\r\nfunction toggleFullscreen(docElm){\r\n    \r\n    if (!isFullscreen()) {\r\n        if (docElm.requestFullscreen) {\r\n            docElm.requestFullscreen()\r\n        } else if (docElm.msRequestFullscreen) {\r\n            docElm.msRequestFullscreen()\r\n        } else if (docElm.mozRequestFullScreen) {\r\n            docElm.mozRequestFullScreen()\r\n        } else if (docElm.webkitRequestFullScreen) {\r\n            docElm.webkitRequestFullScreen()\r\n        }\r\n    } else {\r\n        \r\n        exitFullscreen()\r\n    }\r\n    \r\n}\r\n\r\nfunction exitFullscreen() {\r\n    let document = window.document\r\n    if (document.exitFullscreen) {\r\n        document.exitFullscreen()\r\n      } else if (document.msExitFullscreen) {\r\n        document.msExitFullscreen()\r\n      } else if (document.mozCancelFullScreen) {\r\n        document.mozCancelFullScreen()\r\n      } else if (document.webkitCancelFullScreen) {\r\n        document.webkitCancelFullScreen()\r\n      }\r\n}\r\n\r\n\r\n\r\nclass yk_video_creator  extends videoControl{\r\n    constructor(option) {\r\n        super(option.vid, option.playStopOther);\r\n        if (option.client_id === undefined) {\r\n            throw new Error('client_id is required!')\r\n        }\r\n        this.video_option = {\r\n            vid: option.vid,\r\n            styleid: '0',\r\n            client_id: option.client_id,\r\n            newPlayer: true,\r\n        }\r\n        if (option.poster) {\r\n            this.video_option.poster = option.poster\r\n        }\r\n        if (option.autoplay) {\r\n            this.video_option.autoplay = option.autoplay\r\n        }\r\n        this.initUserEvent(option)\r\n        this.init(option)\r\n    }\r\n    initUserEvent(option) {\r\n        for (var key in option.events) {\r\n            if (option.events.hasOwnProperty(key)) {\r\n                // events[key] = this.option.events[key]\r\n                this.on(key, option.events[key])\r\n            }\r\n        }\r\n    }\r\n    \r\n    init(option) {\r\n        let _this = this;\r\n        let {selector,autoplay} = option;\r\n        \r\n        this.video_option.events = {\r\n            onPlayerReady:  ()=>{\r\n                this.emit('ready')\r\n                if (autoplay) {\r\n                    try {\r\n                        setTimeout( ()=>{\r\n                            _this.play()\r\n                        }, 600)\r\n                    } catch (error) {\r\n                        console.log(error);\r\n                    }\r\n                }\r\n                $('video').attr({\r\n                    'webkit-playsinline': 'playsinline',\r\n                    'x-webkit-airplay': 'allow',\r\n                    'playsinline': 'true',\r\n                    'x5-playsinline': 'true',\r\n                    'x5-video-player-type': 'h5-page',\r\n                    'x5-video-player-fullscreen': 'true'\r\n                })\r\n                var box = $(this.v.select._h5player.playerCon);\r\n                \r\n                if (this.v.select._poster) {\r\n                    var img = box.find('.x-video-poster');\r\n                    img.css('object-fit', 'contain')\r\n                    img.html('<div style=\"overflow: hidden;\"><img style=\"' + blur_str + '\" src=\"' + _this.v.select._poster + '\"></div> <img style=\"position: absolute; top: 0; left: 0;object-fit: contain\" src=\"' + this.v.select._poster + '\">')\r\n                }\r\n\r\n                if (!YKP.isPC) {\r\n                    $('#' + selector).on('mouseover', function () {\r\n                        // console.log('hover')\r\n                        $('#' + selector).find('.x-video-title,.x-gradient,.x-dashboard .x-console-wrap').show()\r\n                        // this.v.showControls()\r\n                    })\r\n                    $('#' + selector).on('mouseleave',  function () {\r\n                        // this.v.hideControls()\r\n                        $('#' + selector).find('.x-video-title,.x-gradient,.x-dashboard .x-console-wrap').hide()\r\n                    })\r\n                    $('#' + selector).on('click', '.i_play',  ()=> {\r\n                        this.pause()\r\n                    })\r\n                    $('#' + selector).on('click', '.i_pause',  ()=> {\r\n                        this.play()\r\n                    })\r\n                    $('#' + selector).on('click', '.i_fscreen',  ()=> {\r\n                        try {\r\n                            toggleFullscreen($('#' + selector).find('.ykplayer')[0])\r\n                        } catch (error) {\r\n                            console.log(error)\r\n                        }\r\n                    })\r\n\r\n                    $('#' + selector).on('mousedown', '.seek-btn', (e) => {\r\n                        let startTime = this.getCurrentTime();\r\n                        let total = this.v.totalTime();\r\n                        let width = $('#' + selector).find('.x-progress-track').width();\r\n                        var startWidth = startTime / total  * width;\r\n                        let l = e.clientX;\r\n                        let ex = e.clientX\r\n                        \r\n                        $('#' + selector).find('.x-prompt').show();\r\n                        let seekToTime = startTime\r\n                        let move = e => {\r\n                            ex = e.clientX\r\n                            let offset = ex - l;\r\n                            let curWidth = startWidth + offset;\r\n                            if (curWidth < 0) {\r\n                                curWidth = 0\r\n                            }\r\n                            if (curWidth > width) {\r\n                                curWidth = width;\r\n                            }\r\n                            $('#' + selector).find('.x-progress-play').css('width', curWidth)\r\n                            seekToTime = Math.floor(curWidth / width * total);\r\n                            let s = seekToTime % 60;\r\n                            let m = Math.floor(seekToTime / 60)\r\n                            $('#' + selector).find('.x-current').html(`${m}:${s}`)\r\n                            \r\n                        }\r\n                        let up = () => {\r\n                            $(window).off('mousemove', move)\r\n                            $(window).off('mouseup', up)\r\n                            $('#' + selector).find('.x-prompt').hide()\r\n\r\n                            this.seekTo(seekToTime)\r\n\r\n                        }\r\n                        \r\n                        $(window).on('mousemove', move)\r\n                        $(window).on('mouseup', up )\r\n                    })\r\n                    \r\n                    this.on('timeupdate', (vid, t) => {\r\n                        let total = this.v.totalTime();\r\n                        let p = (t / total*100).toFixed(2);\r\n                        $('#' + selector).find('.x-progress-play').css('width', p+'%')\r\n                    })\r\n                }\r\n            },\r\n            onPlay :() =>{\r\n                this.emit('play');\r\n            },\r\n            onPause:  ()=> {\r\n                this.emit('pause');\r\n            },\r\n            onTimeupdate:  (t) =>{\r\n                this.emit('timeupdate', this.vid, t);\r\n            },\r\n            onPlayEnd:  () =>{\r\n                this.emit('end');\r\n            },\r\n            onError:  (err) =>{\r\n                this.emit('error', err);\r\n            }\r\n        };\r\n        this.v = new YKU.Player(selector, this.video_option);\r\n    }\r\n    seekTo(t) {\r\n        if (!isNaN(t)) {\r\n            this.v.seekTo(t);\r\n        }\r\n    }\r\n    play() {\r\n        this.v.playVideo()\r\n    }\r\n    pause() {\r\n        this.v.pauseVideo();\r\n    }\r\n    getTotalTime() {\r\n        return this.v.totalTime()\r\n    }\r\n    getCurrentTime() {\r\n        return this.v.currentTime();\r\n    }\r\n}\r\nexport default yk_video_creator","import videoControl from '../videoControl/index';\r\nimport $ from 'jQuery';\r\n\r\nconsole.log($)\r\n// 优酷视频 PC 结构创建\r\nfunction _hidePoster(selector) {\r\n    selector.find('.video_icon,.video_poster').fadeOut();\r\n}\r\nfunction _showPoster(selector) {\r\n    selector.find('.video_icon').show();\r\n    selector.find('.video_poster').fadeIn();\r\n}\r\nfunction _createPoster(selector, poster) {\r\n\r\n    console.log(selector)\r\n    if ('static' == selector.css('position')) {\r\n        selector.css('position', 'relative');\r\n    }\r\n\r\n    if (poster) {\r\n        var str = \"<div class=\\\"video_poster\\\" style=\\\"overflow: hidden; width: 100%;height: 100%\\\"><div style=\\\"overflow: hidden; width: 100%;height: 100%\\\">\\n                    <img style=\\\"width: 100%; height: 100%; object-fit: cover;background: #000;\".concat(blur_str, \"\\\" src=\\\"\").concat(poster, \"\\\">\\n                </div>\\n                <img style=\\\"width: 100%; height: 100%; object-fit: contain;position: absolute; left: 0 ; top:0\\\" src=\\\"\").concat(poster, \"\\\">\\n            </div>\\n            \");\r\n        selector.append('<svg class=\"video_icon\" viewBox=\"0 0 100 100\" style=\"position: absolute; z-index: 1; width: 60px; height: 60px; top: 50%; left: 50%; margin-left: -30px; margin-top: -50px\">  <circle cx=\"50\" cy=\"50\" r=\"44\" style=\"fill:#222;fill-opacity:0.75\"></circle>   <path transform=\"translate(36, 33)\" d=\"M0.6,2C0.6,2,0,3.5,0,16.9C0,30.3,0.6,32,0.6,32c0,1.5,1.6,2.5,2.9,1.8c0,0,3-0.5,15.2-6.6c12.2-6.1,14.2-8.4,14.2-8.4c1.5-0.7,1.5-2.8,0-3.6c0,0-3.3-3.1-14.2-8.6C7.9,1.1,3.5,0.2,3.5,0.2C2.1-0.5,0.6,0.5,0.6,2z\" style=\"   fill:#fff;\"></path></svg>')\r\n        selector.append(str);\r\n    } else {\r\n        selector.append('<div class=\"video_poster_null\" style=\"width: 100%; height: 100%;position: absolute; z-index: 100;left: 0 ; top: 0; cursor: pointer \" ></div>');\r\n    }\r\n}\r\n\r\nclass pc_yk_video  extends videoControl{\r\n    constructor(option) {\r\n        super(option.vid, option.playStopOther);\r\n        this.option = option\r\n        if (option.client_id === undefined) {\r\n            throw new Error('client_id is required!')\r\n        }\r\n        this.video_option = {\r\n            vid: option.vid,\r\n            styleid: '0',\r\n            client_id: option.client_id,\r\n            newPlayer: true,\r\n        }\r\n        if (option.poster) {\r\n            this.video_option = option.poster\r\n        }\r\n        this.initUserEvent(option)\r\n        this.initPcEvent(option)\r\n        this.init(option)\r\n    }\r\n    initUserEvent(option) {\r\n        for (var key in option.events) {\r\n            if (option.events.hasOwnProperty(key)) {\r\n                // events[key] = this.option.events[key]\r\n                this.on(key, option.events[key])\r\n            }\r\n        }\r\n    }\r\n    initPcEvent() {\r\n        window.addEventListener('message',  (e)=> {\r\n            var data = e.data;\r\n            // console.log(e)\r\n            // console.log(e , this.vid)\r\n            switch (data.msg) {\r\n                case \"onPlayerStart\": {\r\n                    video_control.changeStatus('onPlayerStart', video_control.vid)\r\n                    break;\r\n                }\r\n                case \"onPlayEnd\": {\r\n                    video_control.changeStatus('end', video_control.vid)\r\n                    break;\r\n                }\r\n                case 'onTimeUpdate': {\r\n                    video_control.changeStatus('timeupdate', video_control.vid, data.time)\r\n                    break;\r\n                }\r\n                case \"state\": {\r\n                    var state = data.stateParam;\r\n                    if (state == 'play') {\r\n                        video_control.changeStatus('play', video_control.vid)\r\n                    }\r\n                    if (state == 'pause') {\r\n                        video_control.changeStatus('pause', video_control.vid)\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }, false);\r\n    }\r\n    init(option) {\r\n\r\n        console.log($, option)\r\n        this.selector = $('#'+option.selector)\r\n        _createPoster(this.selector, option.poster);\r\n        \r\n        if (!option.poster) {\r\n            this.play();\r\n        }\r\n\r\n        this.selector.on('click', '.video_poster, svg, .video_poster_null',  ()=> {\r\n            this.selector.find('.video_poster_null').hide();\r\n            this.play();\r\n        })\r\n        this.selector.on('click', '.video_poster_null',  ()=> {\r\n            this.video_option.autoplay = true;\r\n            this.play();\r\n        })\r\n        this.on('play', () => {\r\n            if (this.option.poster) {\r\n                _hidePoster(this.selector);\r\n            }\r\n        })\r\n    }\r\n    seekTo() {\r\n        console.error('优酷PC版视频该接口无法调用');\r\n        return -1;\r\n    }\r\n    play() {\r\n        this.selector.find('iframe').remove();\r\n\r\n        console.log(this)\r\n        this.v = new YKU.Player(this.option.selector, this.video_option);\r\n    }\r\n    pause() {\r\n\r\n    }\r\n    getCurrentTime() {\r\n        console.error('优酷PC版视频该接口无法调用');\r\n        //iframe 没有提供相应的接口，\r\n        // 他们的js 中有该方法 但是调用报错\r\n        return -1;\r\n    }\r\n}\r\nexport default pc_yk_video","import mob_yk_video from './mob_yk_video';\r\nimport pc_yk_video from './pc_yk_video';\r\n\r\n\r\nfunction create_youku_video(option) {\r\n    \r\n    YKP.isPC = false\r\n    // YKP.isPC = false\r\n    if (YKP.isPC) {\r\n       return  new pc_yk_video(option);\r\n    } else {\r\n       return  new mob_yk_video(option);\r\n    }\r\n}\r\n\r\nexport default create_youku_video","import $ from 'jQuery';\r\nimport event from './event';\r\n\r\nclass dialog extends event{\r\n    constructor(trigger ,selecotr) {\r\n        super()\r\n        this.trigger = $(trigger);\r\n        this.selector = selecotr;\r\n        this.needUserPlay = false;\r\n        this.init()\r\n    }\r\n    init() {\r\n        let width = window.innerWidth > 1008 ? 1008 : window.innerWidth\r\n        let height = width * 9 / 16;\r\n        if ($('.video_player_dialog').length == 0) {\r\n         \r\n\r\n            let videoStyle = `width: ${width}px;height: ${height}px;margin-left: -${width / 2}px;margin-top: -${height / 2}px;`\r\n            let str = `<div class=\"video_player_dialog\" >\r\n                    <div class=\"close\" >x</div>\r\n                    <div class=\"video_creator_dialog_video\" style=\"${videoStyle}\">\r\n                        <div class=\"video_create_dialog_el\" style=\"width: 100%; height: 100%\"></div>\r\n                    </div>\r\n                </div>`;\r\n            $('body').append(str)\r\n            $('.video_player_dialog').on('click', '.close', () => {\r\n                this.hide()\r\n            })\r\n        }\r\n        $(this.trigger).on('click', () => {\r\n            if ($('.video_create_dialog_el').attr('id') != this.selector) {\r\n                $('.video_player_dialog').find('.video_create_dialog_el').children().remove()\r\n            }\r\n            this.show()\r\n            if ($('.video_create_dialog_el').attr('id') != this.selector) {\r\n                $('.video_player_dialog').find('.video_create_dialog_el').attr('id', this.selector)\r\n                this.needUserPlay = false;\r\n                this.emit('creatVideo')\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n    show() {\r\n        $('.video_player_dialog').fadeIn(() => {\r\n            this.emit('show')\r\n            this.needUserPlay = true;\r\n        });\r\n    }\r\n    hide() {\r\n        $('.video_player_dialog').fadeOut(() => {\r\n            this.emit('hide')\r\n        });\r\n    }\r\n}\r\n\r\n\r\nexport default function createDialog(trigger, selecotr) {\r\n    return  new dialog(trigger, selecotr)\r\n    \r\n}","\r\n// import {  yk_video_creator} from \"./libs/yk\";\r\nimport tx_video_creator from \"./libs/tencent/\";\r\nimport create_youku_video from \"./libs/youku/\";\r\nimport createDialog from \"./libs/dialog\";\r\n\r\n\r\n\r\nimport './css/index.scss'\r\n\r\nconst defaultOption = {\r\n    vid: '',\r\n    vid_from: '',\r\n    dialogPlayer: false,\r\n    playStopOther: true,\r\n    events: { }\r\n}\r\n\r\nclass videoCreator  {\r\n    constructor(option={}) {\r\n        this.option = Object.assign({}, defaultOption, option);\r\n        let { selector, vid, vid_from } = this.option;\r\n\r\n        if (!selector) {\r\n            console.error('option.selector is required!');\r\n            return false;\r\n        }\r\n        if (!vid) {\r\n            console.error('option.vid is required!');\r\n            return false;\r\n        }\r\n        if (!vid_from) {\r\n            console.error('option.vid_from is required!');\r\n            return false;\r\n        }\r\n        \r\n        this.videoItem = null;\r\n\r\n        this.init()\r\n    }\r\n\r\n\r\n    init() {\r\n        let { selector, vid, vid_from, dialogPlayer , client_id } = this.option;\r\n\r\n        if (dialogPlayer) {\r\n\r\n            this.dialog = createDialog(this.option.trigger, selector);\r\n\r\n            this.dialog.on('creatVideo', () => {\r\n                this.option.autoplay = true;\r\n                if (vid_from == 'yk') {\r\n                    this.videoItem = create_youku_video(this.option);\r\n                }\r\n                if (vid_from == 'tx') {\r\n                    this.videoItem = new tx_video_creator(this.option);\r\n                }\r\n            })\r\n            this.dialog.on('show', () => {\r\n                // this.play()\r\n                if (this.dialog.needUserPlay) {\r\n                    this.play()\r\n                }\r\n            })\r\n            this.dialog.on('hide', () => {\r\n                this.pause()\r\n            })\r\n            \r\n        } else {\r\n            if (vid_from == 'yk') {\r\n                this.videoItem = create_youku_video(this.option);\r\n            }\r\n            if (vid_from == 'tx') {\r\n                this.videoItem = new tx_video_creator(this.option);\r\n            }\r\n        }\r\n        \r\n    }\r\n    pause() {\r\n        this.videoItem.pause();\r\n    }\r\n    seekTo(t) {\r\n        if (!isNaN(t)) {\r\n            this.videoItem.seekTo(t);\r\n        }\r\n    }\r\n    play() {\r\n        this.videoItem.play();\r\n    }\r\n    getCurrentTime () {\r\n        return this.videoItem.getCurrentTime();\r\n    }\r\n    on(eventName, handler) {\r\n        if (this.option.dialogPlayer) {\r\n            return  '请使用option.events'\r\n        }\r\n        this.videoItem.on(eventName, handler)\r\n    }\r\n    off(eventName , handler) {\r\n        this.videoItem.off(eventName, handler)\r\n    }\r\n    emit(eventName , ...args) {\r\n        this.videoItem.emit(eventName, ...args)\r\n    }\r\n    once(eventName, handler) {\r\n        if (this.option.dialogPlayer) {\r\n            return  '请使用option.events'\r\n        }\r\n        this.videoItem.once(eventName, handler)\r\n    }\r\n}\r\n\r\nexport default videoCreator;"],"names":["event","_classCallCheck","this","eventMap","eventName","handler","push","filter","fn","_this","on","f","that","_len","arguments","length","args","Array","_key","apply","off","value","_this2","_len2","_key2","forEach","videoControl","vid","playStopOther","_super","call","videoCollections","_assertThisInitialized","stopOtherVideo","item","pause","tx_video_creator","option","v","style","document","createElement","console","log","$","innerHTML","join","append","container","selector","initUserEvent","init","initPlayerEvent","key","events","hasOwnProperty","player","initVideoPlayIcon","find","hide","play","initTimeupdate","e","t","currentTime","undefined","getCurrentTime","emit","error","getPlayerState","device","show","poster","getPoster","html","state","s","_this$option","autoplay","Txplayer","containerId","width","height","_this$v","_this$v2","getDuration","isNaN","seekTo","toggleFullscreen","docElm","fullscreen","mozFullScreen","webkitIsFullScreen","webkitFullScreen","msFullScreen","window","exitFullscreen","msExitFullscreen","mozCancelFullScreen","webkitCancelFullScreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","yk_video_creator","client_id","Error","video_option","styleid","newPlayer","_this3","onPlayerReady","setTimeout","attr","playsinline","box","select","_h5player","playerCon","_poster","img","css","YKP","isPC","startTime","total","totalTime","startWidth","l","clientX","ex","seekToTime","move","curWidth","Math","floor","m","up","p","toFixed","onPlay","onPause","onTimeupdate","onPlayEnd","onError","err","YKU","Player","playVideo","pauseVideo","pc_yk_video","initPcEvent","addEventListener","data","msg","video_control","changeStatus","time","stateParam","str","concat","blur_str","_createPoster","fadeOut","remove","create_youku_video","mob_yk_video","dialog","trigger","selecotr","needUserPlay","innerWidth","videoStyle","children","fadeIn","_this4","defaultOption","vid_from","dialogPlayer","videoCreator","Object","assign","videoItem","_this$option2","_this$videoItem","once"],"mappings":"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"}